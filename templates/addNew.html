{{ template "header.html" .}}
{{ template "menu_new.html" . }}

<form id="myForm">
  <input type="text" name="task" id="task" required="required" placeholder="Task">
  <input type="date" name="deadline" id="deadline" value="2030-01-01">
  <button type="submit">Submit</button>
</form>

<script>
  document.getElementById("myForm").addEventListener("submit", function(event) {
    event.preventDefault(); // Prevent default form submission
  
    // Get form data
    const formData = {
      task: document.getElementById("task").value,
      deadline: document.getElementById("deadline").value,
    };

    // Convert form data to JSON
    const jsonData = JSON.stringify(formData);

    // Send POST request
    fetch("/addTask/", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: jsonData
    })
    .then(response => {
        if (response.redirected) {
            const redirectUrl = response.url;
            window.location.href = redirectUrl;
        } else {
            return response.json();
        }
    })
    .then(data => {
      // Handle response data
      console.log(data);
    })
    .catch(error => {
      // Handle errors
      console.error("Error:", error);
    });
  });
</script>

  

{{ template "footer.html" .}}

